#!/bin/bash

# 6G-RESCUE Backend Startup Script
cd {{ backend.directory }}

python -m venv venv
# Activate virtual environment
source {{ backend.directory }}/venv/bin/activate

# Load environment variables
if [ -f .env ]; then
    export $(cat .env | grep -v '^#' | xargs)
fi

# Check if main.py exists
if [ ! -f "main.py" ]; then
    echo "ERROR: main.py not found in {{ backend.directory }}"
    exit 1
fi

# Start the FastAPI server
echo "Starting 6G-RESCUE Backend on {{ backend.host }}:{{ backend.port }}"
exec uvicorn main:app \
    --host {{ backend.host }} \
    --port {{ backend.port }} \
    --reload \
    --log-level info